atemporal: nearPorts, speedArea.

initiate stopped(Vessel) if
	stop_start(Vessel),
	happens coord(Vessel, Lon, Lat),
	nearPorts(Lon,Lat,[]).

terminate stopped(Vessel) if
	stop_end(Vessel).

initiate lowSpeed(Vessel) if
	slow_motion_start(Vessel),
	happens coord(Vessel, Lon, Lat),
	nearPorts(Lon,Lat,[]).

terminate lowSpeed(Vessel) if
	slow_motion_end(Vessel)
or	start stopped(Vessel).

initiate withinArea(Vessel, AreaName) if
	isInArea(Vessel, AreaName).

terminate withinArea(Vessel, AreaName) if
	leavesArea(Vessel, AreaName).

initiate sailing(Vessel) if
	velocity(Vessel, Speed, Heading),
	Speed > 2.0.

terminate sailing(Vessel) if
	velocity(Vessel, Speed, Heading),
	Speed < 2.0
or	gap_start(Vessel).

initiate highSpeedIn(Vessel, AreaName) if
	isInArea(Vessel, AreaName),
	happens velocity(Vessel, Speed, Heading),
	speedArea(AreaName,SpeedArea),
	Speed > SpeedArea.

terminate highSpeedIn(Vessel, AreaName) if
	isInArea(Vessel, AreaName),
	happens velocity(Vessel, Speed, Heading),
	speedArea(AreaName,SpeedArea),
	Speed < SpeedArea
or	leavesArea(Vessel, AreaName)
or	gap_start(Vessel).

loitering(Vessel) iff
	((lowSpeed(Vessel) or stopped(Vessel)),
	withinArea(Vessel, AreaName)),
	duration > 600.

rendezVouz(Vessel1, Vessel2) iff
	(proximity(Vessel1, Vessel2),
	(lowSpeed(Vessel1) or stopped(Vessel1)),
	(lowSpeed(Vessel2) or stopped(Vessel2))),
	duration > 600.

happens fastApproach(Vessel) if
	speedChange(Vessel),
	velocity(Vessel) > 20 knots,
	coord(Vessel) = (Lon, Lat),
	not nearPorts(Lon, Lat),
	headingToVessels(Vessel).
